exports = module.exports = function () {
  var args = [].slice.call(arguments);
  
  var cb = args.pop();
  
  if (Array.isArray(args[0])) {
    args = args[0];
  }
  
  var len = args.length;
  var errored = false;
  var result = [];

  args.forEach(function(fn, index) {
    fn(function(err, res) {
      if (errored) return;

      if (err) {
        errored = true;
        cb(err);
      }

      len--;

      result[index] = res;

      if (len === 0) {
        cb(null, result);
      }
    });
  });
}